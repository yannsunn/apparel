(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[799],{9072:function(e,n,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/orders/[id]/tracking",function(){return i(9223)}])},9223:function(e,n,i){"use strict";i.r(n),i.d(n,{default:function(){return c}});var s=i(5893),r=i(7294),a=i(1163),t=i(3299);function c(){let e=(0,a.useRouter)(),{data:n,status:i}=(0,t.useSession)(),[c,l]=(0,r.useState)(null),[o,d]=(0,r.useState)(null),[h,u]=(0,r.useState)(!0),{id:j}=e.query;return((0,r.useEffect)(()=>{if(j&&"loading"!==i){if(!n){e.push("/auth/signin");return}(async()=>{try{u(!0);let e=await fetch("/api/orders/".concat(j,"/tracking"));if(!e.ok){if(404===e.status){d("注文が見つかりません");return}throw Error("配送情報の取得に失敗しました")}let n=await e.json();if(n.error){if("STATIC_EXPORT"===n.error.code){d("静的エクスポート環境では配送情報を取得できません。実際のサイトでご確認ください。");return}d(n.error.message||"配送情報の取得に失敗しました");return}l(n)}catch(e){d("配送情報の取得中にエラーが発生しました"),console.error("Tracking info fetch error:",e)}finally{u(!1)}})()}},[j,n,i,e]),"loading"===i||h)?(0,s.jsxs)("div",{className:"loading-container",children:[(0,s.jsx)("div",{className:"loading-spinner"}),(0,s.jsx)("p",{children:"配送情報を読み込んでいます..."})]}):o?(0,s.jsxs)("div",{className:"error-container",children:[(0,s.jsx)("h1",{children:"エラーが発生しました"}),(0,s.jsx)("p",{children:o}),(0,s.jsx)("button",{onClick:()=>e.back(),className:"back-button",children:"前のページに戻る"})]}):c?(0,s.jsxs)("div",{className:"tracking-container",children:[(0,s.jsx)("h1",{children:"配送状況"}),(0,s.jsxs)("div",{className:"tracking-details",children:[(0,s.jsxs)("p",{children:["追跡番号: ",c.trackingNumber]}),(0,s.jsxs)("p",{children:["ステータス: ",c.status]}),(0,s.jsxs)("p",{children:["現在地: ",c.currentLocation||"不明"]}),c.estimatedDeliveryDate&&(0,s.jsxs)("p",{children:["配達予定日: ",new Date(c.estimatedDeliveryDate).toLocaleDateString("ja-JP")]}),c.additionalInfo&&(0,s.jsxs)("div",{className:"additional-info",children:[(0,s.jsx)("h2",{children:"追加情報"}),(0,s.jsxs)("p",{children:["配達時間帯: ",c.additionalInfo.deliveryTimeWindow||"指定なし"]}),(0,s.jsxs)("p",{children:["荷物サイズ: ",c.additionalInfo.packageSize||"不明"]}),(0,s.jsxs)("p",{children:["配送タイプ: ",c.additionalInfo.deliveryType||"通常配送"]})]})]}),c.history&&Array.isArray(c.history)&&(0,s.jsxs)("div",{className:"tracking-history",children:[(0,s.jsx)("h2",{children:"配送履歴"}),(0,s.jsx)("ul",{children:c.history.map((e,n)=>(0,s.jsxs)("li",{className:"history-entry",children:[(0,s.jsx)("time",{children:new Date(e.timestamp).toLocaleString("ja-JP")}),(0,s.jsx)("span",{className:"description",children:e.description}),e.location&&(0,s.jsxs)("span",{className:"location",children:["（",e.location,"）"]}),e.additionalInfo&&(0,s.jsx)("div",{className:"entry-additional-info",children:Object.entries(e.additionalInfo).map(e=>{let[n,i]=e;return(0,s.jsxs)("p",{children:[n,": ",i]},n)})})]},n))})]}),(0,s.jsx)("button",{onClick:()=>e.back(),className:"back-button",children:"前のページに戻る"})]}):(0,s.jsxs)("div",{className:"no-data-container",children:[(0,s.jsx)("p",{children:"配送情報が見つかりません"}),(0,s.jsx)("button",{onClick:()=>e.back(),className:"back-button",children:"前のページに戻る"})]})}},1163:function(e,n,i){e.exports=i(4546)}},function(e){e.O(0,[299,888,774,179],function(){return e(e.s=9072)}),_N_E=e.O()}]);