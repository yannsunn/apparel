(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[224],{4638:function(e,s,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile/addresses/[id]",function(){return l(2825)}])},5822:function(e,s,l){"use strict";var t=l(5893);l(7294);var i=l(1664),a=l.n(i),r=l(3299);s.Z=e=>{let{children:s}=e,{data:l}=(0,r.useSession)();return(0,t.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,t.jsx)("header",{className:"bg-white shadow",children:(0,t.jsx)("nav",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"flex justify-between h-16",children:[(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)(a(),{href:"/",className:"flex items-center",children:(0,t.jsx)("span",{className:"text-xl font-bold text-primary",children:"AparelEC"})}),(0,t.jsxs)("div",{className:"hidden sm:ml-6 sm:flex sm:space-x-8",children:[(0,t.jsx)(a(),{href:"/customize",className:"inline-flex items-center px-1 pt-1 text-gray-900 hover:text-primary",children:"カスタマイズ"}),(0,t.jsx)(a(),{href:"/products",className:"inline-flex items-center px-1 pt-1 text-gray-900 hover:text-primary",children:"商品一覧"})]})]}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(a(),{href:"/cart",className:"p-2 text-gray-900 hover:text-primary",children:"\uD83D\uDED2 カート"}),l?(0,t.jsxs)("div",{className:"ml-4 flex items-center space-x-4",children:[(0,t.jsx)(a(),{href:"/profile",className:"text-gray-900 hover:text-primary",children:"マイページ"}),(0,t.jsx)("button",{onClick:()=>(0,r.signOut)(),className:"text-gray-900 hover:text-primary",children:"ログアウト"})]}):(0,t.jsxs)("div",{className:"ml-4 flex items-center space-x-4",children:[(0,t.jsx)(a(),{href:"/auth/login",className:"text-gray-900 hover:text-primary",children:"ログイン"}),(0,t.jsx)(a(),{href:"/auth/register",className:"bg-primary text-white px-4 py-2 rounded hover:bg-primary/90",children:"新規登録"})]})]})]})})}),(0,t.jsx)("main",{className:"flex-grow",children:s}),(0,t.jsx)("footer",{className:"bg-gray-800 text-white",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"AparelEC"}),(0,t.jsxs)("p",{className:"text-gray-400",children:["高品質なスポーツユニフォームを",(0,t.jsx)("br",{}),"お手頃価格で提供します"]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"リンク"}),(0,t.jsxs)("ul",{className:"space-y-2",children:[(0,t.jsx)("li",{children:(0,t.jsx)(a(),{href:"/about",className:"text-gray-400 hover:text-white",children:"会社概要"})}),(0,t.jsx)("li",{children:(0,t.jsx)(a(),{href:"/contact",className:"text-gray-400 hover:text-white",children:"お問い合わせ"})}),(0,t.jsx)("li",{children:(0,t.jsx)(a(),{href:"/privacy",className:"text-gray-400 hover:text-white",children:"プライバシーポリシー"})})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"お問い合わせ"}),(0,t.jsxs)("p",{className:"text-gray-400",children:["メール: info@aparelec.com",(0,t.jsx)("br",{}),"電話: 03-1234-5678"]})]})]}),(0,t.jsx)("div",{className:"mt-8 pt-8 border-t border-gray-700 text-center text-gray-400",children:(0,t.jsx)("p",{children:"\xa9 2024 AparelEC. All rights reserved."})})]})})]})}},2825:function(e,s,l){"use strict";l.r(s);var t=l(5893),i=l(7294),a=l(3299),r=l(1163),n=l(5822);let d=new(l(385)).PrismaClient;s.default=()=>{let{data:e}=(0,a.useSession)(),s=(0,r.useRouter)(),{id:l}=s.query,[c,o]=(0,i.useState)({name:"",zipCode:"",prefecture:"",city:"",street:"",building:"",phone:"",isDefault:!1}),[x,h]=(0,i.useState)(""),[u,p]=(0,i.useState)("");(0,i.useEffect)(()=>{(async()=>{var s;if((null==e?void 0:null===(s=e.user)||void 0===s?void 0:s.id)&&l){let s=await d.address.findFirst({where:{id:l,userId:e.user.id}});s&&o({name:s.name,zipCode:s.zipCode,prefecture:s.prefecture,city:s.city,street:s.street,building:s.building||"",phone:s.phone,isDefault:s.isDefault})}})()},[e,l]);let m=async t=>{t.preventDefault(),h(""),p("");try{var i;(null==e?void 0:null===(i=e.user)||void 0===i?void 0:i.id)&&l&&(c.isDefault&&await d.address.updateMany({where:{userId:e.user.id,isDefault:!0,NOT:{id:l}},data:{isDefault:!1}}),await d.address.update({where:{id:l},data:c}),p("住所を更新しました"),setTimeout(()=>{s.push("/profile?tab=addresses")},1500))}catch(e){h("住所の更新に失敗しました")}},j=async()=>{if(confirm("この住所を削除してもよろしいですか？"))try{var t;(null==e?void 0:null===(t=e.user)||void 0===t?void 0:t.id)&&l&&(await d.address.delete({where:{id:l}}),s.push("/profile?tab=addresses"))}catch(e){h("住所の削除に失敗しました")}};return e?(0,t.jsx)(n.Z,{children:(0,t.jsxs)("div",{className:"max-w-2xl mx-auto py-12",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"住所編集"}),x&&(0,t.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:x}),u&&(0,t.jsx)("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4",children:u}),(0,t.jsx)("form",{onSubmit:m,className:"bg-white shadow rounded-lg p-6",children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"お名前"}),(0,t.jsx)("input",{type:"text",id:"name",value:c.name,onChange:e=>o({...c,name:e.target.value}),className:"input-field",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"zipCode",className:"block text-sm font-medium text-gray-700",children:"郵便番号"}),(0,t.jsx)("input",{type:"text",id:"zipCode",value:c.zipCode,onChange:e=>o({...c,zipCode:e.target.value}),className:"input-field",required:!0,pattern:"[0-9]{3}-[0-9]{4}",placeholder:"123-4567"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"prefecture",className:"block text-sm font-medium text-gray-700",children:"都道府県"}),(0,t.jsxs)("select",{id:"prefecture",value:c.prefecture,onChange:e=>o({...c,prefecture:e.target.value}),className:"input-field",required:!0,children:[(0,t.jsx)("option",{value:"",children:"選択してください"}),(0,t.jsx)("option",{value:"北海道",children:"北海道"}),(0,t.jsx)("option",{value:"青森県",children:"青森県"}),(0,t.jsx)("option",{value:"岩手県",children:"岩手県"}),(0,t.jsx)("option",{value:"宮城県",children:"宮城県"}),(0,t.jsx)("option",{value:"秋田県",children:"秋田県"}),(0,t.jsx)("option",{value:"山形県",children:"山形県"}),(0,t.jsx)("option",{value:"福島県",children:"福島県"}),(0,t.jsx)("option",{value:"茨城県",children:"茨城県"}),(0,t.jsx)("option",{value:"栃木県",children:"栃木県"}),(0,t.jsx)("option",{value:"群馬県",children:"群馬県"}),(0,t.jsx)("option",{value:"埼玉県",children:"埼玉県"}),(0,t.jsx)("option",{value:"千葉県",children:"千葉県"}),(0,t.jsx)("option",{value:"東京都",children:"東京都"}),(0,t.jsx)("option",{value:"神奈川県",children:"神奈川県"}),(0,t.jsx)("option",{value:"新潟県",children:"新潟県"}),(0,t.jsx)("option",{value:"富山県",children:"富山県"}),(0,t.jsx)("option",{value:"石川県",children:"石川県"}),(0,t.jsx)("option",{value:"福井県",children:"福井県"}),(0,t.jsx)("option",{value:"山梨県",children:"山梨県"}),(0,t.jsx)("option",{value:"長野県",children:"長野県"}),(0,t.jsx)("option",{value:"岐阜県",children:"岐阜県"}),(0,t.jsx)("option",{value:"静岡県",children:"静岡県"}),(0,t.jsx)("option",{value:"愛知県",children:"愛知県"}),(0,t.jsx)("option",{value:"三重県",children:"三重県"}),(0,t.jsx)("option",{value:"滋賀県",children:"滋賀県"}),(0,t.jsx)("option",{value:"京都府",children:"京都府"}),(0,t.jsx)("option",{value:"大阪府",children:"大阪府"}),(0,t.jsx)("option",{value:"兵庫県",children:"兵庫県"}),(0,t.jsx)("option",{value:"奈良県",children:"奈良県"}),(0,t.jsx)("option",{value:"和歌山県",children:"和歌山県"}),(0,t.jsx)("option",{value:"鳥取県",children:"鳥取県"}),(0,t.jsx)("option",{value:"島根県",children:"島根県"}),(0,t.jsx)("option",{value:"岡山県",children:"岡山県"}),(0,t.jsx)("option",{value:"広島県",children:"広島県"}),(0,t.jsx)("option",{value:"山口県",children:"山口県"}),(0,t.jsx)("option",{value:"徳島県",children:"徳島県"}),(0,t.jsx)("option",{value:"香川県",children:"香川県"}),(0,t.jsx)("option",{value:"愛媛県",children:"愛媛県"}),(0,t.jsx)("option",{value:"高知県",children:"高知県"}),(0,t.jsx)("option",{value:"福岡県",children:"福岡県"}),(0,t.jsx)("option",{value:"佐賀県",children:"佐賀県"}),(0,t.jsx)("option",{value:"長崎県",children:"長崎県"}),(0,t.jsx)("option",{value:"熊本県",children:"熊本県"}),(0,t.jsx)("option",{value:"大分県",children:"大分県"}),(0,t.jsx)("option",{value:"宮崎県",children:"宮崎県"}),(0,t.jsx)("option",{value:"鹿児島県",children:"鹿児島県"}),(0,t.jsx)("option",{value:"沖縄県",children:"沖縄県"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700",children:"市区町村"}),(0,t.jsx)("input",{type:"text",id:"city",value:c.city,onChange:e=>o({...c,city:e.target.value}),className:"input-field",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"street",className:"block text-sm font-medium text-gray-700",children:"番地"}),(0,t.jsx)("input",{type:"text",id:"street",value:c.street,onChange:e=>o({...c,street:e.target.value}),className:"input-field",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"building",className:"block text-sm font-medium text-gray-700",children:"建物名・部屋番号"}),(0,t.jsx)("input",{type:"text",id:"building",value:c.building,onChange:e=>o({...c,building:e.target.value}),className:"input-field"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"電話番号"}),(0,t.jsx)("input",{type:"tel",id:"phone",value:c.phone,onChange:e=>o({...c,phone:e.target.value}),className:"input-field",required:!0,pattern:"[0-9]{2,4}-[0-9]{2,4}-[0-9]{4}",placeholder:"090-1234-5678"})]}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("input",{type:"checkbox",id:"isDefault",checked:c.isDefault,onChange:e=>o({...c,isDefault:e.target.checked}),className:"h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded"}),(0,t.jsx)("label",{htmlFor:"isDefault",className:"ml-2 block text-sm text-gray-700",children:"デフォルトの配送先として設定する"})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("button",{type:"button",onClick:j,className:"btn-secondary text-red-600",children:"削除"}),(0,t.jsxs)("div",{className:"flex space-x-4",children:[(0,t.jsx)("button",{type:"button",onClick:()=>s.push("/profile?tab=addresses"),className:"btn-secondary",children:"キャンセル"}),(0,t.jsx)("button",{type:"submit",className:"btn-primary",children:"保存"})]})]})]})})]})}):(0,t.jsx)(n.Z,{children:(0,t.jsxs)("div",{className:"max-w-4xl mx-auto py-12 text-center",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-4",children:"ログインが必要です"}),(0,t.jsx)("p",{className:"text-gray-600 mb-8",children:"住所を編集するにはログインしてください。"})]})})}}},function(e){e.O(0,[664,299,257,888,774,179],function(){return e(e.s=4638)}),_N_E=e.O()}]);