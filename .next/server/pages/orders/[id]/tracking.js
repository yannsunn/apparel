(()=>{var e={};e.id=799,e.ids=[799,888,660],e.modules={309:(e,t,s)=>{"use strict";s.r(t),s.d(t,{config:()=>f,default:()=>x,getServerSideProps:()=>g,getStaticPaths:()=>m,getStaticProps:()=>j,reportWebVitals:()=>S,routeModule:()=>N,unstable_getServerProps:()=>y,unstable_getServerSideProps:()=>P,unstable_getStaticParams:()=>k,unstable_getStaticPaths:()=>b,unstable_getStaticProps:()=>v});var r={};s.r(r),s.d(r,{default:()=>p});var i=s(7093),a=s(5244),n=s(1323),l=s(8942),c=s(5780),o=s(997),d=s(6689),u=s(1163),h=s(1649);function p(){let e=(0,u.useRouter)(),{data:t,status:s}=(0,h.useSession)(),[r,i]=(0,d.useState)(null),[a,n]=(0,d.useState)(null),[l,c]=(0,d.useState)(!0),{id:p}=e.query;return((0,d.useEffect)(()=>{if(p&&"loading"!==s){if(!t){e.push("/auth/signin");return}(async()=>{try{c(!0);let e=await fetch(`/api/orders/${p}/tracking`);if(!e.ok){if(404===e.status){n("注文が見つかりません");return}throw Error("配送情報の取得に失敗しました")}let t=await e.json();if(t.error){if("STATIC_EXPORT"===t.error.code){n("静的エクスポート環境では配送情報を取得できません。実際のサイトでご確認ください。");return}n(t.error.message||"配送情報の取得に失敗しました");return}i(t)}catch(e){n("配送情報の取得中にエラーが発生しました"),console.error("Tracking info fetch error:",e)}finally{c(!1)}})()}},[p,t,s,e]),"loading"===s||l)?(0,o.jsxs)("div",{className:"loading-container",children:[o.jsx("div",{className:"loading-spinner"}),o.jsx("p",{children:"配送情報を読み込んでいます..."})]}):a?(0,o.jsxs)("div",{className:"error-container",children:[o.jsx("h1",{children:"エラーが発生しました"}),o.jsx("p",{children:a}),o.jsx("button",{onClick:()=>e.back(),className:"back-button",children:"前のページに戻る"})]}):r?(0,o.jsxs)("div",{className:"tracking-container",children:[o.jsx("h1",{children:"配送状況"}),(0,o.jsxs)("div",{className:"tracking-details",children:[(0,o.jsxs)("p",{children:["追跡番号: ",r.trackingNumber]}),(0,o.jsxs)("p",{children:["ステータス: ",r.status]}),(0,o.jsxs)("p",{children:["現在地: ",r.currentLocation||"不明"]}),r.estimatedDeliveryDate&&(0,o.jsxs)("p",{children:["配達予定日: ",new Date(r.estimatedDeliveryDate).toLocaleDateString("ja-JP")]}),r.additionalInfo&&(0,o.jsxs)("div",{className:"additional-info",children:[o.jsx("h2",{children:"追加情報"}),(0,o.jsxs)("p",{children:["配達時間帯: ",r.additionalInfo.deliveryTimeWindow||"指定なし"]}),(0,o.jsxs)("p",{children:["荷物サイズ: ",r.additionalInfo.packageSize||"不明"]}),(0,o.jsxs)("p",{children:["配送タイプ: ",r.additionalInfo.deliveryType||"通常配送"]})]})]}),r.history&&Array.isArray(r.history)&&(0,o.jsxs)("div",{className:"tracking-history",children:[o.jsx("h2",{children:"配送履歴"}),o.jsx("ul",{children:r.history.map((e,t)=>(0,o.jsxs)("li",{className:"history-entry",children:[o.jsx("time",{children:new Date(e.timestamp).toLocaleString("ja-JP")}),o.jsx("span",{className:"description",children:e.description}),e.location&&(0,o.jsxs)("span",{className:"location",children:["（",e.location,"）"]}),e.additionalInfo&&o.jsx("div",{className:"entry-additional-info",children:Object.entries(e.additionalInfo).map(([e,t])=>(0,o.jsxs)("p",{children:[e,": ",t]},e))})]},t))})]}),o.jsx("button",{onClick:()=>e.back(),className:"back-button",children:"前のページに戻る"})]}):(0,o.jsxs)("div",{className:"no-data-container",children:[o.jsx("p",{children:"配送情報が見つかりません"}),o.jsx("button",{onClick:()=>e.back(),className:"back-button",children:"前のページに戻る"})]})}let x=(0,n.l)(r,"default"),j=(0,n.l)(r,"getStaticProps"),m=(0,n.l)(r,"getStaticPaths"),g=(0,n.l)(r,"getServerSideProps"),f=(0,n.l)(r,"config"),S=(0,n.l)(r,"reportWebVitals"),v=(0,n.l)(r,"unstable_getStaticProps"),b=(0,n.l)(r,"unstable_getStaticPaths"),k=(0,n.l)(r,"unstable_getStaticParams"),y=(0,n.l)(r,"unstable_getServerProps"),P=(0,n.l)(r,"unstable_getServerSideProps"),N=new i.PagesRouteModule({definition:{kind:a.x.PAGES,page:"/orders/[id]/tracking",pathname:"/orders/[id]/tracking",bundlePath:"",filename:""},components:{App:c.default,Document:l.default},userland:r})},5780:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s(997);s(6764);var i=s(968),a=s.n(i);let n=function({Component:e,pageProps:t}){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(a(),{children:[r.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),r.jsx("meta",{name:"description",content:"AparelEC - オンラインアパレルショップ"}),r.jsx("link",{rel:"icon",href:"/favicon.ico"})]}),r.jsx(e,{...t})]})}},8942:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s(997),i=s(6859),a=s.n(i);class n extends a(){render(){return(0,r.jsxs)(i.Html,{lang:"ja",children:[(0,r.jsxs)(i.Head,{children:[r.jsx("meta",{charSet:"utf-8"}),r.jsx("link",{rel:"preconnect",href:"https://fonts.googleapis.com"}),r.jsx("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:"anonymous"}),r.jsx("link",{href:"https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&display=swap",rel:"stylesheet"})]}),(0,r.jsxs)("body",{children:[r.jsx(i.Main,{}),r.jsx(i.NextScript,{})]})]})}}let l=n},6764:()=>{},1649:e=>{"use strict";e.exports=require("next-auth/react")},2785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{"use strict";e.exports=require("next/head")},6689:e=>{"use strict";e.exports=require("react")},6405:e=>{"use strict";e.exports=require("react-dom")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},7147:e=>{"use strict";e.exports=require("fs")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},9796:e=>{"use strict";e.exports=require("zlib")}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[859,238,163],()=>s(309));module.exports=r})();