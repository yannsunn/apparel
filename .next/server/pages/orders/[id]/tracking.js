(()=>{var e={};e.id=799,e.ids=[799,888,660],e.modules={309:(e,s,t)=>{"use strict";t.r(s),t.d(s,{config:()=>f,default:()=>u,getServerSideProps:()=>g,getStaticPaths:()=>j,getStaticProps:()=>p,reportWebVitals:()=>v,routeModule:()=>k,unstable_getServerProps:()=>y,unstable_getServerSideProps:()=>w,unstable_getStaticParams:()=>S,unstable_getStaticPaths:()=>N,unstable_getStaticProps:()=>b});var r={};t.r(r),t.d(r,{default:()=>h});var a=t(7093),i=t(5244),l=t(1323),n=t(8942),c=t(5780),d=t(997),o=t(6689),x=t(1163),m=t(1649);function h(){let e=(0,x.useRouter)(),{data:s,status:t}=(0,m.useSession)(),[r,a]=(0,o.useState)(null),[i,l]=(0,o.useState)(null),[n,c]=(0,o.useState)(!0),{id:h}=e.query;return((0,o.useEffect)(()=>{if(h&&"loading"!==t){if(!s){e.push("/auth/signin");return}(async()=>{try{c(!0);let e=await fetch(`http://localhost:8888/.netlify/functions/tracking?orderId=${h}`,{headers:{Authorization:`Bearer ${s.accessToken}`}});if(!e.ok){let s=await e.json();l(s);return}let t=await e.json();a(t)}catch(e){l({message:"配送情報の取得中にエラーが発生しました",code:"FETCH_ERROR",statusCode:500}),console.error("Tracking info fetch error:",e)}finally{c(!1)}})()}},[h,s,t,e]),n)?d.jsx("div",{className:"text-center p-4",children:"読み込み中..."}):i?d.jsx("div",{className:"max-w-2xl mx-auto p-4",children:(0,d.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[(0,d.jsxs)("div",{className:"flex items-center mb-4",children:[d.jsx("svg",{className:"w-6 h-6 text-red-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),d.jsx("h2",{className:"text-lg font-semibold text-red-700",children:"エラーが発生しました"})]}),d.jsx("p",{className:"text-red-600 mb-2",children:i.message}),(0,d.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,d.jsxs)("p",{children:["エラーコード: ",i.code]}),(0,d.jsxs)("p",{children:["ステータスコード: ",i.statusCode]})]}),(0,d.jsxs)("button",{onClick:()=>window.location.reload(),className:"mt-4 inline-flex items-center px-4 py-2 border border-red-300 text-sm font-medium rounded-md text-red-700 bg-white hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[d.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"再読み込み"]})]})}):r?(0,d.jsxs)("div",{className:"max-w-2xl mx-auto p-4",children:[d.jsx("h1",{className:"text-2xl font-bold mb-4",children:"配送状況"}),(0,d.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[(0,d.jsxs)("div",{children:[d.jsx("p",{className:"text-gray-600",children:"追跡番号"}),d.jsx("p",{className:"font-semibold",children:r.trackingNumber})]}),(0,d.jsxs)("div",{children:[d.jsx("p",{className:"text-gray-600",children:"配送業者"}),d.jsx("p",{className:"font-semibold",children:r.carrier})]}),(0,d.jsxs)("div",{children:[d.jsx("p",{className:"text-gray-600",children:"現在の状況"}),d.jsx("p",{className:"font-semibold",children:r.status})]}),(0,d.jsxs)("div",{children:[d.jsx("p",{className:"text-gray-600",children:"現在地"}),d.jsx("p",{className:"font-semibold",children:r.currentLocation})]}),(0,d.jsxs)("div",{children:[d.jsx("p",{className:"text-gray-600",children:"最終更新"}),d.jsx("p",{className:"font-semibold",children:new Date(r.timestamp).toLocaleString("ja-JP")})]}),(0,d.jsxs)("div",{children:[d.jsx("p",{className:"text-gray-600",children:"配達予定日時"}),d.jsx("p",{className:"font-semibold",children:r.estimatedDelivery?new Date(r.estimatedDelivery).toLocaleString("ja-JP"):"未定"})]})]}),(0,d.jsxs)("div",{className:"border-t pt-4",children:[d.jsx("h2",{className:"text-lg font-semibold mb-3",children:"配送履歴"}),d.jsx("div",{className:"space-y-4",children:r.history?.map((e,s)=>d.jsxs("div",{className:"flex items-start",children:[d.jsx("div",{className:"flex-shrink-0 w-32 text-sm text-gray-600",children:new Date(e.timestamp).toLocaleString("ja-JP")}),d.jsxs("div",{children:[d.jsx("p",{className:"font-medium",children:e.status}),d.jsx("p",{className:"text-sm text-gray-600",children:e.location}),e.description&&d.jsx("p",{className:"text-sm text-gray-600",children:e.description})]})]},s))})]}),r.additionalInfo&&Object.keys(r.additionalInfo).length>0&&(0,d.jsxs)("div",{className:"border-t mt-6 pt-4",children:[d.jsx("h2",{className:"text-lg font-semibold mb-3",children:"追加情報"}),d.jsx("div",{className:"grid grid-cols-2 gap-4",children:Object.entries(r.additionalInfo).map(([e,s])=>(0,d.jsxs)("div",{children:[d.jsx("p",{className:"text-gray-600",children:e}),d.jsx("p",{className:"font-semibold",children:s})]},e))})]})]})]}):d.jsx("div",{className:"text-center p-4",children:"配送情報が見つかりません"})}let u=(0,l.l)(r,"default"),p=(0,l.l)(r,"getStaticProps"),j=(0,l.l)(r,"getStaticPaths"),g=(0,l.l)(r,"getServerSideProps"),f=(0,l.l)(r,"config"),v=(0,l.l)(r,"reportWebVitals"),b=(0,l.l)(r,"unstable_getStaticProps"),N=(0,l.l)(r,"unstable_getStaticPaths"),S=(0,l.l)(r,"unstable_getStaticParams"),y=(0,l.l)(r,"unstable_getServerProps"),w=(0,l.l)(r,"unstable_getServerSideProps"),k=new a.PagesRouteModule({definition:{kind:i.x.PAGES,page:"/orders/[id]/tracking",pathname:"/orders/[id]/tracking",bundlePath:"",filename:""},components:{App:c.default,Document:n.default},userland:r})},5780:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>l});var r=t(997);t(6764);var a=t(968),i=t.n(a);let l=function({Component:e,pageProps:s}){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(i(),{children:[r.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),r.jsx("meta",{name:"description",content:"AparelEC - オンラインアパレルショップ"}),r.jsx("link",{rel:"icon",href:"/favicon.ico"})]}),r.jsx(e,{...s})]})}},8942:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>n});var r=t(997),a=t(6859),i=t.n(a);class l extends i(){render(){return(0,r.jsxs)(a.Html,{lang:"ja",children:[(0,r.jsxs)(a.Head,{children:[r.jsx("meta",{charSet:"utf-8"}),r.jsx("link",{rel:"preconnect",href:"https://fonts.googleapis.com"}),r.jsx("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:"anonymous"}),r.jsx("link",{href:"https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&display=swap",rel:"stylesheet"})]}),(0,r.jsxs)("body",{children:[r.jsx(a.Main,{}),r.jsx(a.NextScript,{})]})]})}}let n=l},6764:()=>{},1649:e=>{"use strict";e.exports=require("next-auth/react")},2785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{"use strict";e.exports=require("next/head")},6689:e=>{"use strict";e.exports=require("react")},6405:e=>{"use strict";e.exports=require("react-dom")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},7147:e=>{"use strict";e.exports=require("fs")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},9796:e=>{"use strict";e.exports=require("zlib")}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[859,238,163],()=>t(309));module.exports=r})();