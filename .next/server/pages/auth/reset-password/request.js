(()=>{var e={};e.id=563,e.ids=[563,888,660],e.modules={7019:(e,t,s)=>{"use strict";s.r(t),s.d(t,{config:()=>w,default:()=>b,getServerSideProps:()=>N,getStaticPaths:()=>y,getStaticProps:()=>v,reportWebVitals:()=>S,routeModule:()=>D,unstable_getServerProps:()=>C,unstable_getServerSideProps:()=>_,unstable_getStaticParams:()=>k,unstable_getStaticPaths:()=>q,unstable_getStaticProps:()=>P});var r={};s.r(r),s.d(r,{default:()=>f});var a=s(7093),i=s(5244),l=s(1323),n=s(8942),c=s(5780),d=s(997),x=s(6689),o=s(1163),h=s(5734),m=s(3524);let u=require("crypto");var p=s.n(u);async function j(e,t){try{if(!(await fetch("/api/mail/send-password-reset",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,resetToken:t})})).ok)throw Error("メール送信に失敗しました");return!0}catch(e){return console.error("メール送信エラー:",e),!1}}require("nodemailer");let g=new m.PrismaClient,f=()=>{let e=(0,o.useRouter)(),[t,s]=(0,x.useState)(""),[r,a]=(0,x.useState)(""),[i,l]=(0,x.useState)(""),[n,c]=(0,x.useState)(!1),m=async e=>{e.preventDefault(),a(""),l(""),c(!0);try{let e=await g.user.findUnique({where:{email:t}});if(!e){l("パスワードリセット用のリンクを送信しました"),c(!1);return}let s=p().randomBytes(32).toString("hex"),r=new Date(Date.now()+36e5);if(await g.user.update({where:{id:e.id},data:{resetToken:s,resetTokenExpiry:r}}),!await j(t,s))throw Error("メール送信に失敗しました");l("パスワードリセット用のリンクを送信しました")}catch(e){console.error("パスワードリセットエラー:",e),a("パスワードリセットのリクエストに失敗しました")}finally{c(!1)}};return d.jsx(h.Z,{children:(0,d.jsxs)("div",{className:"max-w-md mx-auto py-12",children:[d.jsx("h1",{className:"text-3xl font-bold mb-8",children:"パスワードリセット"}),r&&d.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:r}),i&&d.jsx("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4",children:i}),d.jsx("form",{onSubmit:m,className:"bg-white shadow rounded-lg p-6",children:(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsxs)("div",{children:[d.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"メールアドレス"}),d.jsx("input",{type:"email",id:"email",value:t,onChange:e=>s(e.target.value),className:"input-field",required:!0,disabled:n})]}),(0,d.jsxs)("div",{className:"flex justify-end space-x-4",children:[d.jsx("button",{type:"button",onClick:()=>e.push("/auth/signin"),className:"btn-secondary",disabled:n,children:"ログインページに戻る"}),d.jsx("button",{type:"submit",className:"btn-primary",disabled:n,children:n?"送信中...":"リセットリンクを送信"})]})]})})]})})},b=(0,l.l)(r,"default"),v=(0,l.l)(r,"getStaticProps"),y=(0,l.l)(r,"getStaticPaths"),N=(0,l.l)(r,"getServerSideProps"),w=(0,l.l)(r,"config"),S=(0,l.l)(r,"reportWebVitals"),P=(0,l.l)(r,"unstable_getStaticProps"),q=(0,l.l)(r,"unstable_getStaticPaths"),k=(0,l.l)(r,"unstable_getStaticParams"),C=(0,l.l)(r,"unstable_getServerProps"),_=(0,l.l)(r,"unstable_getServerSideProps"),D=new a.PagesRouteModule({definition:{kind:i.x.PAGES,page:"/auth/reset-password/request",pathname:"/auth/reset-password/request",bundlePath:"",filename:""},components:{App:c.default,Document:n.default},userland:r})},5734:(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});var r=s(997);s(6689);var a=s(1664),i=s.n(a),l=s(1649);let n=({children:e})=>{let{data:t}=(0,l.useSession)();return(0,r.jsxs)("div",{className:"min-h-screen flex flex-col",children:[r.jsx("header",{className:"bg-white shadow",children:r.jsx("nav",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex justify-between h-16",children:[(0,r.jsxs)("div",{className:"flex",children:[r.jsx(i(),{href:"/",className:"flex items-center",children:r.jsx("span",{className:"text-xl font-bold text-primary",children:"AparelEC"})}),(0,r.jsxs)("div",{className:"hidden sm:ml-6 sm:flex sm:space-x-8",children:[r.jsx(i(),{href:"/customize",className:"inline-flex items-center px-1 pt-1 text-gray-900 hover:text-primary",children:"カスタマイズ"}),r.jsx(i(),{href:"/products",className:"inline-flex items-center px-1 pt-1 text-gray-900 hover:text-primary",children:"商品一覧"})]})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(i(),{href:"/cart",className:"p-2 text-gray-900 hover:text-primary",children:"\uD83D\uDED2 カート"}),t?(0,r.jsxs)("div",{className:"ml-4 flex items-center space-x-4",children:[r.jsx(i(),{href:"/profile",className:"text-gray-900 hover:text-primary",children:"マイページ"}),r.jsx("button",{onClick:()=>(0,l.signOut)(),className:"text-gray-900 hover:text-primary",children:"ログアウト"})]}):(0,r.jsxs)("div",{className:"ml-4 flex items-center space-x-4",children:[r.jsx(i(),{href:"/auth/login",className:"text-gray-900 hover:text-primary",children:"ログイン"}),r.jsx(i(),{href:"/auth/register",className:"bg-primary text-white px-4 py-2 rounded hover:bg-primary/90",children:"新規登録"})]})]})]})})}),r.jsx("main",{className:"flex-grow",children:e}),r.jsx("footer",{className:"bg-gray-800 text-white",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"AparelEC"}),(0,r.jsxs)("p",{className:"text-gray-400",children:["高品質なスポーツユニフォームを",r.jsx("br",{}),"お手頃価格で提供します"]})]}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"リンク"}),(0,r.jsxs)("ul",{className:"space-y-2",children:[r.jsx("li",{children:r.jsx(i(),{href:"/about",className:"text-gray-400 hover:text-white",children:"会社概要"})}),r.jsx("li",{children:r.jsx(i(),{href:"/contact",className:"text-gray-400 hover:text-white",children:"お問い合わせ"})}),r.jsx("li",{children:r.jsx(i(),{href:"/privacy",className:"text-gray-400 hover:text-white",children:"プライバシーポリシー"})})]})]}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"お問い合わせ"}),(0,r.jsxs)("p",{className:"text-gray-400",children:["メール: info@aparelec.com",r.jsx("br",{}),"電話: 03-1234-5678"]})]})]}),r.jsx("div",{className:"mt-8 pt-8 border-t border-gray-700 text-center text-gray-400",children:r.jsx("p",{children:"\xa9 2024 AparelEC. All rights reserved."})})]})})]})}},5780:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s(997);s(6764);var a=s(968),i=s.n(a);let l=function({Component:e,pageProps:t}){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(i(),{children:[r.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),r.jsx("meta",{name:"description",content:"AparelEC - オンラインアパレルショップ"}),r.jsx("link",{rel:"icon",href:"/favicon.ico"})]}),r.jsx(e,{...t})]})}},8942:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s(997),a=s(6859),i=s.n(a);class l extends i(){render(){return(0,r.jsxs)(a.Html,{lang:"ja",children:[(0,r.jsxs)(a.Head,{children:[r.jsx("meta",{charSet:"utf-8"}),r.jsx("link",{rel:"preconnect",href:"https://fonts.googleapis.com"}),r.jsx("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:"anonymous"}),r.jsx("link",{href:"https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&display=swap",rel:"stylesheet"})]}),(0,r.jsxs)("body",{children:[r.jsx(a.Main,{}),r.jsx(a.NextScript,{})]})]})}}let n=l},6764:()=>{},3524:e=>{"use strict";e.exports=require("@prisma/client")},1649:e=>{"use strict";e.exports=require("next-auth/react")},2785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{"use strict";e.exports=require("next/head")},6689:e=>{"use strict";e.exports=require("react")},6405:e=>{"use strict";e.exports=require("react-dom")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},7147:e=>{"use strict";e.exports=require("fs")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},9796:e=>{"use strict";e.exports=require("zlib")}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[859,238,664,163],()=>s(7019));module.exports=r})();