(()=>{var e={};e.id=740,e.ids=[740,888,660],e.modules={1805:(e,s,r)=>{"use strict";r.r(s),r.d(s,{config:()=>N,default:()=>w,getServerSideProps:()=>y,getStaticPaths:()=>v,getStaticProps:()=>b,reportWebVitals:()=>P,routeModule:()=>A,unstable_getServerProps:()=>C,unstable_getServerSideProps:()=>_,unstable_getStaticParams:()=>k,unstable_getStaticPaths:()=>q,unstable_getStaticProps:()=>S});var t={};r.r(t),r.d(t,{default:()=>f});var a=r(7093),i=r(5244),l=r(1323),n=r(8942),c=r(5780),d=r(997),x=r(6689),o=r(1649),m=r(1163),h=r(5734),u=r(3524),p=r(8432),j=r.n(p);let g=new u.PrismaClient,f=()=>{let{data:e}=(0,o.useSession)(),s=(0,m.useRouter)(),[r,t]=(0,x.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),[a,i]=(0,x.useState)(""),[l,n]=(0,x.useState)(""),c=async t=>{if(t.preventDefault(),i(""),n(""),r.newPassword!==r.confirmPassword){i("新規パスワードが一致しません");return}try{if(e?.user?.id){let t=await g.user.findUnique({where:{id:e.user.id},select:{password:!0}});if(!t){i("ユーザーが見つかりません");return}if(!await j().compare(r.currentPassword,t.password)){i("現在のパスワードが正しくありません");return}let a=await j().hash(r.newPassword,10);await g.user.update({where:{id:e.user.id},data:{password:a}}),n("パスワードを変更しました"),setTimeout(()=>{s.push("/profile")},1500)}}catch(e){i("パスワードの変更に失敗しました")}};return e?d.jsx(h.Z,{children:(0,d.jsxs)("div",{className:"max-w-2xl mx-auto py-12",children:[d.jsx("h1",{className:"text-3xl font-bold mb-8",children:"パスワード変更"}),a&&d.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:a}),l&&d.jsx("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4",children:l}),d.jsx("form",{onSubmit:c,className:"bg-white shadow rounded-lg p-6",children:(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsxs)("div",{children:[d.jsx("label",{htmlFor:"currentPassword",className:"block text-sm font-medium text-gray-700",children:"現在のパスワード"}),d.jsx("input",{type:"password",id:"currentPassword",value:r.currentPassword,onChange:e=>t({...r,currentPassword:e.target.value}),className:"input-field",required:!0,minLength:8})]}),(0,d.jsxs)("div",{children:[d.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-700",children:"新規パスワード"}),d.jsx("input",{type:"password",id:"newPassword",value:r.newPassword,onChange:e=>t({...r,newPassword:e.target.value}),className:"input-field",required:!0,minLength:8})]}),(0,d.jsxs)("div",{children:[d.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"新規パスワード（確認）"}),d.jsx("input",{type:"password",id:"confirmPassword",value:r.confirmPassword,onChange:e=>t({...r,confirmPassword:e.target.value}),className:"input-field",required:!0,minLength:8})]}),(0,d.jsxs)("div",{className:"flex justify-end space-x-4",children:[d.jsx("button",{type:"button",onClick:()=>s.push("/profile"),className:"btn-secondary",children:"キャンセル"}),d.jsx("button",{type:"submit",className:"btn-primary",children:"変更"})]})]})})]})}):d.jsx(h.Z,{children:(0,d.jsxs)("div",{className:"max-w-4xl mx-auto py-12 text-center",children:[d.jsx("h1",{className:"text-3xl font-bold mb-4",children:"ログインが必要です"}),d.jsx("p",{className:"text-gray-600 mb-8",children:"パスワードを変更するにはログインしてください。"})]})})},w=(0,l.l)(t,"default"),b=(0,l.l)(t,"getStaticProps"),v=(0,l.l)(t,"getStaticPaths"),y=(0,l.l)(t,"getServerSideProps"),N=(0,l.l)(t,"config"),P=(0,l.l)(t,"reportWebVitals"),S=(0,l.l)(t,"unstable_getStaticProps"),q=(0,l.l)(t,"unstable_getStaticPaths"),k=(0,l.l)(t,"unstable_getStaticParams"),C=(0,l.l)(t,"unstable_getServerProps"),_=(0,l.l)(t,"unstable_getServerSideProps"),A=new a.PagesRouteModule({definition:{kind:i.x.PAGES,page:"/profile/password",pathname:"/profile/password",bundlePath:"",filename:""},components:{App:c.default,Document:n.default},userland:t})},5734:(e,s,r)=>{"use strict";r.d(s,{Z:()=>n});var t=r(997);r(6689);var a=r(1664),i=r.n(a),l=r(1649);let n=({children:e})=>{let{data:s}=(0,l.useSession)();return(0,t.jsxs)("div",{className:"min-h-screen flex flex-col",children:[t.jsx("header",{className:"bg-white shadow",children:t.jsx("nav",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"flex justify-between h-16",children:[(0,t.jsxs)("div",{className:"flex",children:[t.jsx(i(),{href:"/",className:"flex items-center",children:t.jsx("span",{className:"text-xl font-bold text-primary",children:"AparelEC"})}),(0,t.jsxs)("div",{className:"hidden sm:ml-6 sm:flex sm:space-x-8",children:[t.jsx(i(),{href:"/customize",className:"inline-flex items-center px-1 pt-1 text-gray-900 hover:text-primary",children:"カスタマイズ"}),t.jsx(i(),{href:"/products",className:"inline-flex items-center px-1 pt-1 text-gray-900 hover:text-primary",children:"商品一覧"})]})]}),(0,t.jsxs)("div",{className:"flex items-center",children:[t.jsx(i(),{href:"/cart",className:"p-2 text-gray-900 hover:text-primary",children:"\uD83D\uDED2 カート"}),s?(0,t.jsxs)("div",{className:"ml-4 flex items-center space-x-4",children:[t.jsx(i(),{href:"/profile",className:"text-gray-900 hover:text-primary",children:"マイページ"}),t.jsx("button",{onClick:()=>(0,l.signOut)(),className:"text-gray-900 hover:text-primary",children:"ログアウト"})]}):(0,t.jsxs)("div",{className:"ml-4 flex items-center space-x-4",children:[t.jsx(i(),{href:"/auth/login",className:"text-gray-900 hover:text-primary",children:"ログイン"}),t.jsx(i(),{href:"/auth/register",className:"bg-primary text-white px-4 py-2 rounded hover:bg-primary/90",children:"新規登録"})]})]})]})})}),t.jsx("main",{className:"flex-grow",children:e}),t.jsx("footer",{className:"bg-gray-800 text-white",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[(0,t.jsxs)("div",{children:[t.jsx("h3",{className:"text-lg font-semibold mb-4",children:"AparelEC"}),(0,t.jsxs)("p",{className:"text-gray-400",children:["高品質なスポーツユニフォームを",t.jsx("br",{}),"お手頃価格で提供します"]})]}),(0,t.jsxs)("div",{children:[t.jsx("h3",{className:"text-lg font-semibold mb-4",children:"リンク"}),(0,t.jsxs)("ul",{className:"space-y-2",children:[t.jsx("li",{children:t.jsx(i(),{href:"/about",className:"text-gray-400 hover:text-white",children:"会社概要"})}),t.jsx("li",{children:t.jsx(i(),{href:"/contact",className:"text-gray-400 hover:text-white",children:"お問い合わせ"})}),t.jsx("li",{children:t.jsx(i(),{href:"/privacy",className:"text-gray-400 hover:text-white",children:"プライバシーポリシー"})})]})]}),(0,t.jsxs)("div",{children:[t.jsx("h3",{className:"text-lg font-semibold mb-4",children:"お問い合わせ"}),(0,t.jsxs)("p",{className:"text-gray-400",children:["メール: info@aparelec.com",t.jsx("br",{}),"電話: 03-1234-5678"]})]})]}),t.jsx("div",{className:"mt-8 pt-8 border-t border-gray-700 text-center text-gray-400",children:t.jsx("p",{children:"\xa9 2024 AparelEC. All rights reserved."})})]})})]})}},5780:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>l});var t=r(997);r(6764);var a=r(968),i=r.n(a);let l=function({Component:e,pageProps:s}){return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(i(),{children:[t.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),t.jsx("meta",{name:"description",content:"AparelEC - オンラインアパレルショップ"}),t.jsx("link",{rel:"icon",href:"/favicon.ico"})]}),t.jsx(e,{...s})]})}},8942:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>n});var t=r(997),a=r(6859),i=r.n(a);class l extends i(){render(){return(0,t.jsxs)(a.Html,{lang:"ja",children:[(0,t.jsxs)(a.Head,{children:[t.jsx("meta",{charSet:"utf-8"}),t.jsx("link",{rel:"preconnect",href:"https://fonts.googleapis.com"}),t.jsx("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:"anonymous"}),t.jsx("link",{href:"https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&display=swap",rel:"stylesheet"})]}),(0,t.jsxs)("body",{children:[t.jsx(a.Main,{}),t.jsx(a.NextScript,{})]})]})}}let n=l},6764:()=>{},3524:e=>{"use strict";e.exports=require("@prisma/client")},8432:e=>{"use strict";e.exports=require("bcryptjs")},1649:e=>{"use strict";e.exports=require("next-auth/react")},2785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{"use strict";e.exports=require("next/head")},6689:e=>{"use strict";e.exports=require("react")},6405:e=>{"use strict";e.exports=require("react-dom")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},7147:e=>{"use strict";e.exports=require("fs")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},9796:e=>{"use strict";e.exports=require("zlib")}};var s=require("../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[859,238,664,163],()=>r(1805));module.exports=t})();