(()=>{var e={};e.id=224,e.ids=[224,888,660],e.modules={5352:(e,t,s)=>{"use strict";s.r(t),s.d(t,{config:()=>b,default:()=>j,getServerSideProps:()=>g,getStaticPaths:()=>f,getStaticProps:()=>v,reportWebVitals:()=>y,routeModule:()=>k,unstable_getServerProps:()=>C,unstable_getServerSideProps:()=>P,unstable_getStaticParams:()=>S,unstable_getStaticPaths:()=>w,unstable_getStaticProps:()=>N});var r={};s.r(r),s.d(r,{default:()=>m});var i=s(7093),l=s(5244),a=s(1323),n=s(8942),c=s(5780),d=s(997),o=s(6689),x=s(1649),u=s(1163),h=s(5734);let p=new(s(3524)).PrismaClient,m=()=>{let{data:e}=(0,x.useSession)(),t=(0,u.useRouter)(),{id:s}=t.query,[r,i]=(0,o.useState)({name:"",zipCode:"",prefecture:"",city:"",street:"",building:"",phone:"",isDefault:!1}),[l,a]=(0,o.useState)(""),[n,c]=(0,o.useState)("");(0,o.useEffect)(()=>{(async()=>{if(e?.user?.id&&s){let t=await p.address.findFirst({where:{id:s,userId:e.user.id}});t&&i({name:t.name,zipCode:t.zipCode,prefecture:t.prefecture,city:t.city,street:t.street,building:t.building||"",phone:t.phone,isDefault:t.isDefault})}})()},[e,s]);let m=async i=>{i.preventDefault(),a(""),c("");try{e?.user?.id&&s&&(r.isDefault&&await p.address.updateMany({where:{userId:e.user.id,isDefault:!0,NOT:{id:s}},data:{isDefault:!1}}),await p.address.update({where:{id:s},data:r}),c("住所を更新しました"),setTimeout(()=>{t.push("/profile?tab=addresses")},1500))}catch(e){a("住所の更新に失敗しました")}},j=async()=>{if(confirm("この住所を削除してもよろしいですか？"))try{e?.user?.id&&s&&(await p.address.delete({where:{id:s}}),t.push("/profile?tab=addresses"))}catch(e){a("住所の削除に失敗しました")}};return e?d.jsx(h.Z,{children:(0,d.jsxs)("div",{className:"max-w-2xl mx-auto py-12",children:[d.jsx("h1",{className:"text-3xl font-bold mb-8",children:"住所編集"}),l&&d.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:l}),n&&d.jsx("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4",children:n}),d.jsx("form",{onSubmit:m,className:"bg-white shadow rounded-lg p-6",children:(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsxs)("div",{children:[d.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"お名前"}),d.jsx("input",{type:"text",id:"name",value:r.name,onChange:e=>i({...r,name:e.target.value}),className:"input-field",required:!0})]}),(0,d.jsxs)("div",{children:[d.jsx("label",{htmlFor:"zipCode",className:"block text-sm font-medium text-gray-700",children:"郵便番号"}),d.jsx("input",{type:"text",id:"zipCode",value:r.zipCode,onChange:e=>i({...r,zipCode:e.target.value}),className:"input-field",required:!0,pattern:"[0-9]{3}-[0-9]{4}",placeholder:"123-4567"})]}),(0,d.jsxs)("div",{children:[d.jsx("label",{htmlFor:"prefecture",className:"block text-sm font-medium text-gray-700",children:"都道府県"}),(0,d.jsxs)("select",{id:"prefecture",value:r.prefecture,onChange:e=>i({...r,prefecture:e.target.value}),className:"input-field",required:!0,children:[d.jsx("option",{value:"",children:"選択してください"}),d.jsx("option",{value:"北海道",children:"北海道"}),d.jsx("option",{value:"青森県",children:"青森県"}),d.jsx("option",{value:"岩手県",children:"岩手県"}),d.jsx("option",{value:"宮城県",children:"宮城県"}),d.jsx("option",{value:"秋田県",children:"秋田県"}),d.jsx("option",{value:"山形県",children:"山形県"}),d.jsx("option",{value:"福島県",children:"福島県"}),d.jsx("option",{value:"茨城県",children:"茨城県"}),d.jsx("option",{value:"栃木県",children:"栃木県"}),d.jsx("option",{value:"群馬県",children:"群馬県"}),d.jsx("option",{value:"埼玉県",children:"埼玉県"}),d.jsx("option",{value:"千葉県",children:"千葉県"}),d.jsx("option",{value:"東京都",children:"東京都"}),d.jsx("option",{value:"神奈川県",children:"神奈川県"}),d.jsx("option",{value:"新潟県",children:"新潟県"}),d.jsx("option",{value:"富山県",children:"富山県"}),d.jsx("option",{value:"石川県",children:"石川県"}),d.jsx("option",{value:"福井県",children:"福井県"}),d.jsx("option",{value:"山梨県",children:"山梨県"}),d.jsx("option",{value:"長野県",children:"長野県"}),d.jsx("option",{value:"岐阜県",children:"岐阜県"}),d.jsx("option",{value:"静岡県",children:"静岡県"}),d.jsx("option",{value:"愛知県",children:"愛知県"}),d.jsx("option",{value:"三重県",children:"三重県"}),d.jsx("option",{value:"滋賀県",children:"滋賀県"}),d.jsx("option",{value:"京都府",children:"京都府"}),d.jsx("option",{value:"大阪府",children:"大阪府"}),d.jsx("option",{value:"兵庫県",children:"兵庫県"}),d.jsx("option",{value:"奈良県",children:"奈良県"}),d.jsx("option",{value:"和歌山県",children:"和歌山県"}),d.jsx("option",{value:"鳥取県",children:"鳥取県"}),d.jsx("option",{value:"島根県",children:"島根県"}),d.jsx("option",{value:"岡山県",children:"岡山県"}),d.jsx("option",{value:"広島県",children:"広島県"}),d.jsx("option",{value:"山口県",children:"山口県"}),d.jsx("option",{value:"徳島県",children:"徳島県"}),d.jsx("option",{value:"香川県",children:"香川県"}),d.jsx("option",{value:"愛媛県",children:"愛媛県"}),d.jsx("option",{value:"高知県",children:"高知県"}),d.jsx("option",{value:"福岡県",children:"福岡県"}),d.jsx("option",{value:"佐賀県",children:"佐賀県"}),d.jsx("option",{value:"長崎県",children:"長崎県"}),d.jsx("option",{value:"熊本県",children:"熊本県"}),d.jsx("option",{value:"大分県",children:"大分県"}),d.jsx("option",{value:"宮崎県",children:"宮崎県"}),d.jsx("option",{value:"鹿児島県",children:"鹿児島県"}),d.jsx("option",{value:"沖縄県",children:"沖縄県"})]})]}),(0,d.jsxs)("div",{children:[d.jsx("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700",children:"市区町村"}),d.jsx("input",{type:"text",id:"city",value:r.city,onChange:e=>i({...r,city:e.target.value}),className:"input-field",required:!0})]}),(0,d.jsxs)("div",{children:[d.jsx("label",{htmlFor:"street",className:"block text-sm font-medium text-gray-700",children:"番地"}),d.jsx("input",{type:"text",id:"street",value:r.street,onChange:e=>i({...r,street:e.target.value}),className:"input-field",required:!0})]}),(0,d.jsxs)("div",{children:[d.jsx("label",{htmlFor:"building",className:"block text-sm font-medium text-gray-700",children:"建物名・部屋番号"}),d.jsx("input",{type:"text",id:"building",value:r.building,onChange:e=>i({...r,building:e.target.value}),className:"input-field"})]}),(0,d.jsxs)("div",{children:[d.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"電話番号"}),d.jsx("input",{type:"tel",id:"phone",value:r.phone,onChange:e=>i({...r,phone:e.target.value}),className:"input-field",required:!0,pattern:"[0-9]{2,4}-[0-9]{2,4}-[0-9]{4}",placeholder:"090-1234-5678"})]}),(0,d.jsxs)("div",{className:"flex items-center",children:[d.jsx("input",{type:"checkbox",id:"isDefault",checked:r.isDefault,onChange:e=>i({...r,isDefault:e.target.checked}),className:"h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded"}),d.jsx("label",{htmlFor:"isDefault",className:"ml-2 block text-sm text-gray-700",children:"デフォルトの配送先として設定する"})]}),(0,d.jsxs)("div",{className:"flex justify-between",children:[d.jsx("button",{type:"button",onClick:j,className:"btn-secondary text-red-600",children:"削除"}),(0,d.jsxs)("div",{className:"flex space-x-4",children:[d.jsx("button",{type:"button",onClick:()=>t.push("/profile?tab=addresses"),className:"btn-secondary",children:"キャンセル"}),d.jsx("button",{type:"submit",className:"btn-primary",children:"保存"})]})]})]})})]})}):d.jsx(h.Z,{children:(0,d.jsxs)("div",{className:"max-w-4xl mx-auto py-12 text-center",children:[d.jsx("h1",{className:"text-3xl font-bold mb-4",children:"ログインが必要です"}),d.jsx("p",{className:"text-gray-600 mb-8",children:"住所を編集するにはログインしてください。"})]})})},j=(0,a.l)(r,"default"),v=(0,a.l)(r,"getStaticProps"),f=(0,a.l)(r,"getStaticPaths"),g=(0,a.l)(r,"getServerSideProps"),b=(0,a.l)(r,"config"),y=(0,a.l)(r,"reportWebVitals"),N=(0,a.l)(r,"unstable_getStaticProps"),w=(0,a.l)(r,"unstable_getStaticPaths"),S=(0,a.l)(r,"unstable_getStaticParams"),C=(0,a.l)(r,"unstable_getServerProps"),P=(0,a.l)(r,"unstable_getServerSideProps"),k=new i.PagesRouteModule({definition:{kind:l.x.PAGES,page:"/profile/addresses/[id]",pathname:"/profile/addresses/[id]",bundlePath:"",filename:""},components:{App:c.default,Document:n.default},userland:r})},5734:(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});var r=s(997);s(6689);var i=s(1664),l=s.n(i),a=s(1649);let n=({children:e})=>{let{data:t}=(0,a.useSession)();return(0,r.jsxs)("div",{className:"min-h-screen flex flex-col",children:[r.jsx("header",{className:"bg-white shadow",children:r.jsx("nav",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex justify-between h-16",children:[(0,r.jsxs)("div",{className:"flex",children:[r.jsx(l(),{href:"/",className:"flex items-center",children:r.jsx("span",{className:"text-xl font-bold text-primary",children:"AparelEC"})}),(0,r.jsxs)("div",{className:"hidden sm:ml-6 sm:flex sm:space-x-8",children:[r.jsx(l(),{href:"/customize",className:"inline-flex items-center px-1 pt-1 text-gray-900 hover:text-primary",children:"カスタマイズ"}),r.jsx(l(),{href:"/products",className:"inline-flex items-center px-1 pt-1 text-gray-900 hover:text-primary",children:"商品一覧"})]})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(l(),{href:"/cart",className:"p-2 text-gray-900 hover:text-primary",children:"\uD83D\uDED2 カート"}),t?(0,r.jsxs)("div",{className:"ml-4 flex items-center space-x-4",children:[r.jsx(l(),{href:"/profile",className:"text-gray-900 hover:text-primary",children:"マイページ"}),r.jsx("button",{onClick:()=>(0,a.signOut)(),className:"text-gray-900 hover:text-primary",children:"ログアウト"})]}):(0,r.jsxs)("div",{className:"ml-4 flex items-center space-x-4",children:[r.jsx(l(),{href:"/auth/login",className:"text-gray-900 hover:text-primary",children:"ログイン"}),r.jsx(l(),{href:"/auth/register",className:"bg-primary text-white px-4 py-2 rounded hover:bg-primary/90",children:"新規登録"})]})]})]})})}),r.jsx("main",{className:"flex-grow",children:e}),r.jsx("footer",{className:"bg-gray-800 text-white",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"AparelEC"}),(0,r.jsxs)("p",{className:"text-gray-400",children:["高品質なスポーツユニフォームを",r.jsx("br",{}),"お手頃価格で提供します"]})]}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"リンク"}),(0,r.jsxs)("ul",{className:"space-y-2",children:[r.jsx("li",{children:r.jsx(l(),{href:"/about",className:"text-gray-400 hover:text-white",children:"会社概要"})}),r.jsx("li",{children:r.jsx(l(),{href:"/contact",className:"text-gray-400 hover:text-white",children:"お問い合わせ"})}),r.jsx("li",{children:r.jsx(l(),{href:"/privacy",className:"text-gray-400 hover:text-white",children:"プライバシーポリシー"})})]})]}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"お問い合わせ"}),(0,r.jsxs)("p",{className:"text-gray-400",children:["メール: info@aparelec.com",r.jsx("br",{}),"電話: 03-1234-5678"]})]})]}),r.jsx("div",{className:"mt-8 pt-8 border-t border-gray-700 text-center text-gray-400",children:r.jsx("p",{children:"\xa9 2024 AparelEC. All rights reserved."})})]})})]})}},5780:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s(997);s(6764);var i=s(968),l=s.n(i);let a=function({Component:e,pageProps:t}){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(l(),{children:[r.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),r.jsx("meta",{name:"description",content:"AparelEC - オンラインアパレルショップ"}),r.jsx("link",{rel:"icon",href:"/favicon.ico"})]}),r.jsx(e,{...t})]})}},8942:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s(997),i=s(6859),l=s.n(i);class a extends l(){render(){return(0,r.jsxs)(i.Html,{lang:"ja",children:[(0,r.jsxs)(i.Head,{children:[r.jsx("meta",{charSet:"utf-8"}),r.jsx("link",{rel:"preconnect",href:"https://fonts.googleapis.com"}),r.jsx("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:"anonymous"}),r.jsx("link",{href:"https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&display=swap",rel:"stylesheet"})]}),(0,r.jsxs)("body",{children:[r.jsx(i.Main,{}),r.jsx(i.NextScript,{})]})]})}}let n=a},6764:()=>{},3524:e=>{"use strict";e.exports=require("@prisma/client")},1649:e=>{"use strict";e.exports=require("next-auth/react")},2785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{"use strict";e.exports=require("next/head")},6689:e=>{"use strict";e.exports=require("react")},6405:e=>{"use strict";e.exports=require("react-dom")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},7147:e=>{"use strict";e.exports=require("fs")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},9796:e=>{"use strict";e.exports=require("zlib")}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[859,238,664,163],()=>s(5352));module.exports=r})();